{% extends "base.html" %}
{% block content %}
<header>
    <div class="badge">Legacy Cipher</div>
    <h1>DES Algorithm Tracer</h1>
</header>

<form method="POST">
    <label>Operation</label>
    <select name="operation">
        <option value="ENCRYPT" {% if request.form.get('operation') == 'ENCRYPT' %}selected{% endif %}>Encrypt</option>
        <option value="DECRYPT" {% if request.form.get('operation') == 'DECRYPT' %}selected{% endif %}>Decrypt</option>
    </select>

    <label>Input</label>
    <input type="text" name="text" value="{{ request.form.get('text', '') }}" placeholder="64-bit block (Text or Hex)" required>

    <label>Key (16 Hex Characters)</label>
    <input type="text" name="key" value="{{ request.form.get('key', '') }}" placeholder="e.g. 133457799BBCDFF1" required>

    <button type="submit">Execute DES Trace</button>
</form>

{% if error %}<div class="error-message">Error: {{ error }}</div>{% endif %}

{% if result %}
    <div class="trace-container">
        <div class="trace-title" style="margin-top: 2rem;">Process Trace</div>
        <div class="output-box trace-log">{% for step in result.steps %}{{ step }}
{% endfor %}</div>
    </div>
{% endif %}
{% endblock %}